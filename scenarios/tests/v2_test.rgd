# v2_test.rgd
# v2è¨­è¨ˆã®æ–°æ©Ÿèƒ½ã‚’ãƒ†ã‚¹ãƒˆã™ã‚‹ã‚µãƒ³ãƒ—ãƒ«ã‚¹ã‚¯ãƒªãƒ—ãƒˆ

# === v2æ–°æ©Ÿèƒ½: å®šç¾©ã‚¹ãƒ†ãƒ¼ãƒˆãƒ¡ãƒ³ãƒˆ ===

# ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼å®šç¾© (v2æ–°æ§‹æ–‡)
character y = Character("å„ªå­", name_color="#c8ffc8", show_callback="yuko_mouth_start", hide_callback="yuko_mouth_stop", type_speed_cps=25.0)
character s = Character("Saitos", name_color="#ffc8c8", show_callback="saitos_callback", type_speed_cps=30.0)

# ç”»åƒå®šç¾© (é™æ­¢ç”»)
image yuko happy = "res://images/yuko_happy.png"
image yuko normal = "res://images/yuko_normal.png"
image yuko sad = "res://images/yuko_sad.png"
image bg school = "res://bg/school.jpg"
image bg classroom = "res://bg/classroom.jpg"

# ç”»åƒå®šç¾© (ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³)
image yuko idle:
    "res://images/yuko_idle_1.png"
    0.5
    "res://images/yuko_idle_2.png"
    0.5
    loop

# ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªå®šç¾©
audio town_bgm = "res://bgm/town.ogg"
audio school_bgm = "res://bgm/school.ogg" 
audio door_open = "res://se/door_open.wav"
audio footsteps = "res://se/footsteps.wav"

# ã‚·ã‚§ãƒ¼ãƒ€ãƒ¼å®šç¾©
shader sepia_effect = "res://shaders/sepia.gdshader"
shader blur_effect = "res://shaders/blur.gdshader"

# === ãƒ¡ã‚¤ãƒ³ã‚·ãƒŠãƒªã‚ª ===

label v2_test_start:
    "ğŸš€ v2è¨­è¨ˆã®æ–°æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆã‚’é–‹å§‹ã—ã¾ã™ï¼"
    
    # v2: å¤‰æ•°å±•é–‹æ§‹æ–‡ [variable] vs ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ã‚¿ã‚°æ§‹æ–‡ {tag} (å°†æ¥å®Ÿè£…)
    set player_name = "ãƒ†ã‚¹ãƒˆãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼"
    "ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼å: [player_name]"
    
    # v2: æ–°ã—ã„å®šç¾©ã‚·ã‚¹ãƒ†ãƒ ã‚’ä½¿ã£ãŸèƒŒæ™¯è¡¨ç¤º
    scene bg school with fade
    "å­¦æ ¡ã®èƒŒæ™¯ãŒè¡¨ç¤ºã•ã‚Œã¾ã—ãŸï¼ˆv2å®šç¾©ã‚·ã‚¹ãƒ†ãƒ ä½¿ç”¨ï¼‰"
    
    # v2: æ–°ã—ã„ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼å®šç¾©ã‚’ä½¿ã£ãŸè¡¨ç¤º
    show y happy at center with dissolve
    y "ã“ã‚“ã«ã¡ã¯ï¼ç§ã¯æ–°ã—ã„v2ã‚·ã‚¹ãƒ†ãƒ ã§å®šç¾©ã•ã‚ŒãŸã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã§ã™ã€‚"
    
    show s normal at left
    s "åƒ•ã‚‚æ–°ã—ã„Character()å®šç¾©ã§ä½œã‚‰ã‚Œã¾ã—ãŸã€‚"
    s "name_colorã‚„ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯æ©Ÿèƒ½ã‚‚ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã™ï¼"
    
    menu:
        "v2æ–°æ©Ÿèƒ½ã®ãƒ†ã‚¹ãƒˆã‚’ç¶šã‘ã‚‹":
            jump test_definitions
        "v1ã¨ã®äº’æ›æ€§ã‚’ãƒ†ã‚¹ãƒˆ":
            jump test_compatibility
        "ã‚·ã‚¹ãƒ†ãƒ çµ‚äº†":
            jump test_end

label test_definitions:
    "ğŸ“Š v2å®šç¾©ã‚·ã‚¹ãƒ†ãƒ ã®ãƒ†ã‚¹ãƒˆã§ã™"
    
    # ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ç”»åƒã®ãƒ†ã‚¹ãƒˆ (å°†æ¥å®Ÿè£…)
    # show y idle at center
    # y "ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³è¡¨ç¤ºã®ãƒ†ã‚¹ãƒˆäºˆå®šã§ã™"
    
    # è¤‡æ•°ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼è¡¨ç¤ºãƒ†ã‚¹ãƒˆ
    show y happy at right
    show s happy at left
    
    y "äºŒäººåŒæ™‚ã«è¡¨ç¤ºã•ã‚Œã¦ã„ã¾ã™ï¼"
    s "v2ã‚·ã‚¹ãƒ†ãƒ ã®çµ±åˆç®¡ç†ã«ã‚ˆã‚‹ã‚‚ã®ã§ã™ã€‚"
    
    # èƒŒæ™¯å¤‰æ›´ãƒ†ã‚¹ãƒˆ
    scene bg classroom with dissolve
    
    y "æ•™å®¤ã«ç§»å‹•ã—ã¾ã—ãŸã€‚"
    s "ã‚·ãƒ¼ãƒ³å¤‰æ›´ã‚‚ã‚¹ãƒ ãƒ¼ã‚ºã§ã™ã­ã€‚"
    
    jump test_end

label test_compatibility:
    "ğŸ”„ v1äº’æ›æ€§ãƒ†ã‚¹ãƒˆ"
    
    # v1ã‚¹ã‚¿ã‚¤ãƒ«ã®defineæ–‡ã‚‚ã‚µãƒãƒ¼ãƒˆç¶™ç¶š
    define old_char = Character("res://characters/old_style.tres")
    
    "v1ã®defineæ–‡ã‚‚å¼•ãç¶šãå‹•ä½œã—ã¾ã™ã€‚"
    "ã“ã‚Œã«ã‚ˆã‚Šæ—¢å­˜ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®ç§»è¡ŒãŒå®¹æ˜“ã«ãªã‚Šã¾ã™ã€‚"
    
    jump test_end

label test_end:
    hide y with fade
    hide s with fade
    
    "âœ… v2ã‚·ã‚¹ãƒ†ãƒ ã®ãƒ†ã‚¹ãƒˆãŒå®Œäº†ã—ã¾ã—ãŸï¼"
    "ä¸»ãªæ–°æ©Ÿèƒ½:"
    "â€¢ å˜ä¸€ã‚ªãƒ¼ãƒˆãƒ­ãƒ¼ãƒ‰(AdvSystem)ã«ã‚ˆã‚‹çµ±åˆç®¡ç†"
    "â€¢ character, image, audio, shaderå®šç¾©ã‚¹ãƒ†ãƒ¼ãƒˆãƒ¡ãƒ³ãƒˆ"
    "â€¢ ãƒ¬ã‚¤ãƒ¤ãƒ¼ãƒãƒƒãƒ”ãƒ³ã‚°ã‚·ã‚¹ãƒ†ãƒ "
    "â€¢ çµ±ä¸€åˆæœŸåŒ–ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯"
    
    "ğŸ‰ v2ã¸ã®ç§»è¡ŒãŒæˆåŠŸã—ã¾ã—ãŸï¼"