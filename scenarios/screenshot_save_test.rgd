# Screenshot Save Test - スクリーンショット機能とスロット構造のテスト
# Enhanced save/load system with screenshot thumbnails

[initialize_test_setup]
set test_var "スクリーンショット機能のテスト"
set scene_setup true
narrator "スクリーンショット付きセーブ機能をテストします。"

[test_background_and_character]
# 背景とキャラクターを表示してスクリーンショットに含める
scene bg001
narrator "背景を設定しました。"
show yuko normal center
narrator "ユーコちゃんが登場しました。"
yuko "こんにちは！これはスクリーンショット付きセーブのテストです。"

[test_auto_save]
narrator "まず、オートセーブ（スロット0）をテストします。"
# オートセーブは内部で自動実行される想定
narrator "オートセーブが実行されました。"

[test_manual_save]
narrator "次に、手動セーブ（スロット1以降）をテストします。"
# save コマンドでスロット1にセーブ
save 1 "スクリーンショットテスト"
narrator "スロット1にスクリーンショット付きでセーブしました！"

[test_another_scene]
# シーンを変更してから別のスロットにセーブ
scene bg002
show saitos normal right
narrator "シーンを変更しました。"
saitos "違うシーンでのセーブテストです。"
save 2 "シーン2のセーブ"

[test_load]
narrator "セーブデータのロードをテストします。"
load 1
narrator "スロット1からロードしました。スクリーンショットと一緒に状態が復元されているはずです。"

[test_slot_validation]
narrator "スロットバリデーションをテストします。"
# これはエラーになるはず（スロット0は手動セーブ禁止）
save 0 "これは失敗する"
narrator "スロット0への手動セーブは禁止されています。"

[end_test]
narrator "スクリーンショット機能とスロット構造のテストが完了しました。"
narrator "以下の機能がテストされました："
narrator "- スクリーンショット付きセーブ（Base64エンコード）"
narrator "- オートセーブ専用スロット0"
narrator "- 手動セーブ用スロット1以降"
narrator "- スロット番号バリデーション"
narrator "結果はコンソールログで確認してください。"
