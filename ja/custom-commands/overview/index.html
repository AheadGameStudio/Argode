<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">
<title>Overview - Argode ドキュメント</title>
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="description" content="A powerful visual novel framework for Godot Engine">
<meta name="generator" content="mkdocs-1.6.1, mkdocs-gitbook-1.0.7">
<meta name="author" content="AheadGameStudio">
<link rel="shortcut icon" href="../../../images/favicon.ico" type="image/x-icon">
<meta name="HandheldFriendly" content="true"/>
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<meta rel="next" href="" />
<link href="../../../css/style.min.css" rel="stylesheet"> 
</head>

<body>
<div class="book">
<div class="book-summary">
<div id="book-search-input" role="search">
<input type="text" placeholder="Type to search" />
</div> <!-- end of book-search-input -->

<nav role="navigation">
<ul class="summary">
<li>
<a href="../../" target="_blank" class="custom-link">Argode ドキュメント</a>
</li>
<li class="divider"></li>
<li class="chapter" data-path="ja/">
<a href="../../">Home</a>
<li class="header">Getting Started</li>

<li>
<a href="../../getting-started/quick-start/" class="">Quick Start</a>
</li>

<li>
<a href="../../../getting-started/installation.md" class="">Installation</a>
</li>

<li>
<a href="../../../getting-started/basic-setup.md" class="">Basic Setup</a>
</li>

<li class="header">Architecture</li>

<li>
<a href="../../architecture/design-philosophy/" class="">Design Philosophy</a>
</li>

<li>
<a href="../../../architecture/system-overview.md" class="">System Overview</a>
</li>

<li>
<a href="../../../architecture/core-components.md" class="">Core Components</a>
</li>

<li class="header">Script Reference</li>

<li>
<a href="../../../script/rgd-syntax.md" class="">RGD Syntax</a>
</li>

<li>
<a href="../../../script/commands.md" class="">Commands</a>
</li>

<li>
<a href="../../../script/variables.md" class="">Variables & Expressions</a>
</li>

<li>
<a href="../../../script/definitions.md" class="">Definitions</a>
</li>

<li class="header">Custom Commands</li>

<li>
<a href="./" class="active">Overview</a>
</li>

<li>
<a href="../built-in/" class="">Built-in Commands</a>
</li>

<li>
<a href="../../../custom-commands/creating.md" class="">Creating Commands</a>
</li>

<li class="header">UI System</li>

<li>
<a href="../../../ui/advscreen.md" class="">AdvScreen</a>
</li>

<li>
<a href="../../../ui/themes.md" class="">Themes</a>
</li>

<li>
<a href="../../../ui/custom.md" class="">Custom UI</a>
</li>

<li class="header">Advanced Topics</li>

<li>
<a href="../../../advanced/asset-management.md" class="">Asset Management</a>
</li>

<li>
<a href="../../../advanced/performance.md" class="">Performance Optimization</a>
</li>

<li>
<a href="../../../advanced/debugging.md" class="">Debugging</a>
</li>

<li class="header">Examples</li>

<li>
<a href="../../../examples/simple-vn.md" class="">Simple VN</a>
</li>

<li>
<a href="../../../examples/custom-features.md" class="">Custom Features</a>
</li>

<li>
<a href="../../../examples/best-practices.md" class="">Best Practices</a>
</li>

<li class="header">API Reference</li>

<li>
<a href="../../../api/argode-system.md" class="">ArgodeSystem</a>
</li>

<li>
<a href="../../../api/script-player.md" class="">ScriptPlayer</a>
</li>

<li>
<a href="../../../api/managers.md" class="">Managers</a>
</li>

<li class="divider"></li>



<li><a href="http://www.mkdocs.org">
Published with MkDocs
</a></li>

<li><a href="https://github.com/GitbookIO/theme-default">
Theme by GitBook
</a></li>
</ul>

</nav>

</div> <!-- end of book-summary -->

<div class="book-body">
<div class="body-inner">
<div class="book-header" role="navigation">

<!-- Title -->
<h1>
<i class="fa fa-circle-o-notch fa-spin"></i>
<a href="." ></a>
</h1>

</div> <!-- end of book-header -->

<div class="page-wrapper" tabindex="-1" role="main">
<div class="page-inner">
<div id="book-search-results">
<div class="search-noresults">

<section class="normal markdown-section">



<h1 id="_1">カスタムコマンド概要</h1>
<p>Argodeの最も強力な機能の一つは、カスタムコマンドによる<strong>無限の拡張性</strong>です。組み込みスクリプトパーサーが認識しないコマンドは、自動的にシグナルとして転送され、ゲーム固有の機能をシームレスに実装できます。</p>
<h2 id="_2">🎯 カスタムコマンドの仕組み</h2>
<p>Argodeがスクリプト内で未知のコマンドに遭遇すると、以下のプロセスを実行します：</p>
<pre class="mermaid"><code>graph TD
    A[スクリプト行を解析] --&gt; B{組み込みコマンド?}
    B --&gt;|はい| C[組み込み実行]
    B --&gt;|いいえ| D[コマンド・パラメータを抽出]
    D --&gt; E[custom_command_executedシグナルを発行]
    E --&gt; F[あなたのハンドラーがシグナルを受信]
    F --&gt; G[カスタムロジックを実行]
    G --&gt; H[スクリプト継続]

    style E fill:#e1f5fe
    style F fill:#f3e5f5</code></pre>
<h2 id="_3">📝 基本例</h2>
<p>画面揺れエフェクトのカスタムコマンドを作成してみましょう：</p>
<h3 id="storyrgd">スクリプト内 (story.rgd)</h3>
<pre class="highlight"><code class="language-rgd">label earthquake_scene:
    narrator "地面が揺れ始める！"
    screen_shake intensity=8.0 duration=2.0
    narrator "すごい揺れだった！"</code></pre>
<h3 id="maingd">コード内 (Main.gd)</h3>
<pre class="highlight"><code class="language-gdscript">extends Control

func _ready():
    # カスタムコマンドシグナルに接続
    ArgodeSystem.ScriptPlayer.custom_command_executed.connect(_handle_custom_command)

func _handle_custom_command(command_name: String, parameters: Dictionary, line: String):
    match command_name:
        "screen_shake":
            var intensity = parameters.get("intensity", 5.0)
            var duration = parameters.get("duration", 1.0)
            _shake_screen(intensity, duration)

func _shake_screen(intensity: float, duration: float):
    var tween = create_tween()
    var original_position = global_position

    for i in range(int(duration * 60)):  # 60 FPS
        var offset = Vector2(
            randf_range(-intensity, intensity),
            randf_range(-intensity, intensity)
        )
        tween.tween_to(global_position + offset, 1.0/60.0)

    tween.tween_to(original_position, 0.1)</code></pre>
<h2 id="_4">🔧 パラメータ解析</h2>
<p>Argodeは複数の形式でパラメータを自動解析します：</p>
<h3 id="_5">キー・値パラメータ</h3>
<p><pre class="highlight"><code class="language-rgd">particle_effect type="explosion" x=100 y=200 scale=1.5</code></pre>
<pre class="highlight"><code class="language-gdscript"># parameters["type"] = "explosion"
# parameters["x"] = 100
# parameters["y"] = 200  
# parameters["scale"] = 1.5</code></pre></p>
<h3 id="_6">位置パラメータ</h3>
<p><pre class="highlight"><code class="language-rgd">fade_to_color red 2.0 ease_in</code></pre>
<pre class="highlight"><code class="language-gdscript"># parameters["arg0"] = "red"
# parameters["arg1"] = 2.0
# parameters["arg2"] = "ease_in"
# parameters["_count"] = 3</code></pre></p>
<h3 id="_7">混合パラメータ</h3>
<p><pre class="highlight"><code class="language-rgd">spawn_enemy goblin attack=15 x=300 magical=true</code></pre>
<pre class="highlight"><code class="language-gdscript"># parameters["arg0"] = "goblin"
# parameters["attack"] = 15
# parameters["x"] = 300
# parameters["magical"] = true</code></pre></p>
<h2 id="_8">🎮 組み込みカスタムコマンド</h2>
<p>Argodeは、ベストプラクティスを示す事前構築されたカスタムコマンドを含んでいます：</p>
<h3 id="_9">ウィンドウエフェクト</h3>
<pre class="highlight"><code class="language-rgd">window shake intensity=5.0 duration=0.5
window fullscreen toggle
window resize 1280 720</code></pre>
<h3 id="_10">スクリーンエフェクト</h3>
<pre class="highlight"><code class="language-rgd">screen_tint color=#ff0000 intensity=0.3 duration=1.0
screen_flash color=#ffffff duration=0.1
screen_blur intensity=2.0 duration=0.5</code></pre>
<h3 id="_11">高度なエフェクト</h3>
<pre class="highlight"><code class="language-rgd">particle_effect explosion x=400 y=300
camera_shake intensity=3.0 duration=1.5 
layer_tint background color=#0066cc intensity=0.5</code></pre>
<p><a class="md-button" href="built-in.ja.md">すべての組み込みコマンドを見る →</a></p>
<h2 id="vs">⚡ 同期 vs 非同期コマンド</h2>
<p>コマンドは<strong>同期</strong>（スクリプト実行をブロック）または<strong>非同期</strong>（並行実行）のどちらでも可能です：</p>
<h3 id="_12">非同期（デフォルト）</h3>
<pre class="highlight"><code class="language-gdscript">func _handle_custom_command(command_name: String, parameters: Dictionary, line: String):
    match command_name:
        "play_sound":
            # スクリプトは即座に継続
            audio_player.play_sound(parameters.get("file"))</code></pre>
<h3 id="_13">同期</h3>
<pre class="highlight"><code class="language-gdscript">func _handle_custom_command(command_name: String, parameters: Dictionary, line: String):
    match command_name:
        "wait":
            # スクリプトは完了まで待機
            var duration = parameters.get("duration", 1.0)
            await get_tree().create_timer(duration).timeout
            ArgodeSystem.CustomCommandHandler.synchronous_command_completed.emit()</code></pre>
<h2 id="_14">🎨 高度な使用例</h2>
<h3 id="_15">ゲームメカニクス統合</h3>
<pre class="highlight"><code class="language-rgd"># RPG風コマンド
add_item "Magic Sword" quantity=1
gain_experience 250
level_up_check

# インベントリ管理
show_inventory category="weapons"
equip_item "Magic Sword"</code></pre>
<h3 id="_16">ビジュアルエフェクト</h3>
<pre class="highlight"><code class="language-rgd"># 複雑なアニメーション
animate_character alice slide_in from=left duration=0.8 easing=bounce
morph_background from=day to=night duration=3.0
create_weather rain intensity=0.7</code></pre>
<h3 id="ui">カスタムUI</h3>
<pre class="highlight"><code class="language-rgd"># ミニゲームとインタラクティブ要素
start_minigame "puzzle_box" difficulty=3
show_map location="forest" interactive=true
display_stats character="alice" style="detailed"</code></pre>
<h2 id="_17">📚 ベストプラクティス</h2>
<h3 id="1">1. 一貫した命名</h3>
<p>明確で説明的なコマンド名を使用：
<pre class="highlight"><code class="language-rgd">✅ screen_shake intensity=5.0
✅ play_music "battle_theme" volume=0.8
❌ shake 5
❌ music battle_theme  </code></pre></p>
<h3 id="2">2. パラメータ検証</h3>
<p>ハンドラーで常にパラメータを検証：
<pre class="highlight"><code class="language-gdscript">func _handle_custom_command(command_name: String, parameters: Dictionary, line: String):
    match command_name:
        "screen_shake":
            var intensity = clamp(parameters.get("intensity", 5.0), 0.1, 50.0)
            var duration = clamp(parameters.get("duration", 1.0), 0.1, 10.0)
            _shake_screen(intensity, duration)</code></pre></p>
<h3 id="3">3. エラーハンドリング</h3>
<p>意味のあるエラーメッセージを提供：
<pre class="highlight"><code class="language-gdscript">func _handle_play_sound(parameters: Dictionary):
    var file = parameters.get("file", "")
    if file.is_empty():
        push_error("play_soundコマンドには'file'パラメータが必要です")
        return

    if not FileAccess.file_exists("res://audio/" + file):
        push_error("オーディオファイルが見つかりません: " + file)
        return

    audio_player.stream = load("res://audio/" + file)
    audio_player.play()</code></pre></p>
<h3 id="4">4. ドキュメント化</h3>
<p>カスタムコマンドを文書化：
<pre class="highlight"><code class="language-gdscript">## 指定された強度と継続時間で画面を揺らす
## パラメータ:
##   intensity (float): 揺れの強さ (0.1 - 50.0, デフォルト: 5.0)  
##   duration (float): 揺れの継続時間(秒) (0.1 - 10.0, デフォルト: 1.0)
## 例: screen_shake intensity=3.0 duration=0.8
func _handle_screen_shake(parameters: Dictionary):
    # 実装...</code></pre></p>
<h2 id="_18">🚀 次のステップ</h2>
<p>独自のカスタムコマンドを作成する準備はできましたか？</p>
<ul>
<li><strong><a href="built-in.ja.md">組み込みコマンドリファレンス</a></strong>: 利用可能なすべてのコマンドを確認</li>
<li><strong><a href="creating.ja.md">カスタムコマンド作成</a></strong>: ステップバイステップ実装ガイド  </li>
<li><strong><a href="../examples/custom-features.ja.md">高度なパターン</a></strong>: 複雑なコマンド例</li>
</ul>
<hr />
<p>カスタムコマンドシステムによりArgodeは無限に拡張可能です—シンプルなエフェクトから複雑なゲームメカニクスまで、何でも可能です！</p>
<p><a class="md-button md-button--primary" href="built-in.ja.md">組み込みコマンドを見る →</a>
<a class="md-button" href="creating.ja.md">独自コマンドを作る →</a></p>


</section>
</div> <!-- end of search-noresults -->
<div class="search-results">
<div class="has-results">

<h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
<ul class="search-results-list"></ul>

</div> <!-- end of has-results -->
<div class="no-results">

<h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>

</div> <!-- end of no-results -->
</div> <!-- end of search-results -->
</div> <!-- end of book-search-results -->

</div> <!-- end of page-inner -->
</div> <!-- end of page-wrapper -->

</div> <!-- end of body-inner -->

</div> <!-- end of book-body -->
<script src="../../../js/main.js"></script>
<script src="../../../search/main.js"></script>
<script src="../../../js/gitbook.min.js"></script>
<script src="../../../js/theme.min.js"></script>
</body>
</html>