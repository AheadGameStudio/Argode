# ベストプラクティス

Argodeでビジュアルノベルを開発する際、特定のベストプラクティスに従うことで、スムーズで効率的なプロセスを実現できます。このガイドでは、保守可能で高性能、かつスケーラブルなプロジェクトを構築するための推奨事項を提供します。

## プロジェクト構造

適切に整理されたプロジェクト構造は、長期的な保守性にとって非常に重要です。Argodeは柔軟ですが、以下の提案を検討してください。

*   **アセットの分離**: `assets/`ディレクトリを整理し、画像、オーディオ、その他のメディアを分類します。
*   **RGDスクリプトの整理**: `.rgd`スクリプトファイルを専用の`scenarios/`ディレクトリに配置し、章やルートごとにサブフォルダを作成することもできます。
*   **カスタムコマンド**: カスタムGDScriptコマンドを`custom/commands/`または同様の専用フォルダに保存します。
*   **UIシーン**: `.tscn`UIシーンを`ui/`または`scenes/ui/`ディレクトリに保持します。
*   **定義**: `character`、`image`、`audio`などの定義を専用の`.rgd`定義ファイル（例：`definitions/characters.rgd`、`definitions/assets.rgd`）に一元化します。

## RGDスクリプト

クリーンで効率的な`.rgd`スクリプトを作成することは、管理しやすいプロジェクトの鍵です。

*   **フロー制御にラベルを使用**: `label`および`jump`コマンドを使用して、ストーリーセグメント間の明確なナビゲーションを実現します。
*   **スクリプトのモジュール化**: 長い物語を、より小さく管理しやすい`.rgd`ファイル（例：シーンごと、章ごと）に分割します。`call`または`jump`を使用してそれらをリンクします。
*   **一貫した命名規則**: ラベル、変数、アセットに対して明確な命名規則を確立し、それに従います。
*   **コメント**: `#`で単一行コメント、`/* ... */`で複数行コメントを使用して、複雑なロジックや一時的なメモを説明します。

*   **変数の使用**: `VariableManager`とその`set_array`、`set_dict`コマンドを活用して、構造化されたデータを扱います。
*   **ハードコーディングの回避**: 可能な限り、物語に直接値をハードコーディングするのではなく、変数または定義を使用します。

## アセット管理

Argodeのスクリプト中心のアセット定義は、管理を簡素化します。以下のヒントに従ってください。

*   **アセットを一元的に定義**: すべての`character`、`image`、`audio`、`shader`、`ui_scene`定義を専用の`.rgd`定義ファイルで宣言します。これにより、それらを簡単に見つけて変更できます。
*   **一貫したパス**: すべてのアセットに一貫した`res://`パスを使用します。
*   **アセットの最適化**: 画像、オーディオ、ビデオアセットがサイズと形式に関して最適化されていることを確認し、ロード時間を改善し、メモリ使用量を削減します（[パフォーマンス最適化](../advanced/performance.md)を参照）。

## UI開発

ArgodeのUIシステムは強力です。いくつかのベストプラクティスを以下に示します。

*   **`AdvScreen`の使用**: スクリプトと対話する複雑なUI要素の場合、GDScriptで`AdvScreen`を拡張します。
*   **レイヤーの役割**: 視覚的な順序を維持するために、`CanvasLayer`ノードの`LayerManager`の役割を明確に定義して使用します。
*   **モジュール式UIシーン**: 複雑なUIを、より小さく再利用可能な`.tscn`コンポーネントに分割します。
*   **レスポンシブデザイン**: GodotのControlノードとアンカーを使用して、さまざまな画面解像度とアスペクト比に適切に適応するようにUIシーンを設計します。

## カスタムコマンドによる拡張性

Argodeの拡張性は大きな強みです。賢く使用してください。

*   **ロジックのカプセル化**: カスタムコマンドを作成する際、特定のゲームロジックまたは視覚効果をその中にカプセル化します。
*   **明確なパラメータ**: 明確で直感的なパラメータを持つカスタムコマンドを設計します。
*   **シグナルベースの通信**: `CustomCommandHandler`のシグナルを活用して、`.rgd`スクリプトからGDScript関数をトリガーします。
*   **ドキュメント**: カスタムコマンドの目的、パラメータ、例を含むドキュメントを徹底的に作成します。

## パフォーマンスとデバッグ

詳細なガイダンスについては、専用のセクションを参照してください。

*   [パフォーマンス最適化](../advanced/performance.md): Argodeの組み込み最適化と一般的なGodotのパフォーマンスのヒントについて学びます。
*   [デバッグ](../advanced/debugging.md): Argodeのリアルタイムデバッグ機能とGodotの強力なデバッグツールについて学びます。

## バージョン管理

プロジェクトには常にバージョン管理システム（Gitなど）を使用してください。これにより、次のことが可能になります。

*   **変更の追跡**: コードとアセットへのすべての変更履歴を保持します。
*   **共同作業**: チームと効果的に作業します。
*   **安全な実験**: メインプロジェクトに影響を与えることなく、新機能やバグ修正のためにブランチを作成します。
*   **変更の元に戻し**: 何か問題が発生した場合でも、以前のバージョンに簡単にロールバックできます。

これらのベストプラクティスを採用することで、Argodeの全機能を活用して、魅力的で高品質なビジュアルノベルを作成できます。

---

[シンプルなVNの例について学ぶ →](simple-vn.md){ .md-button }
[カスタム機能の例について学ぶ →](custom-features.md){ .md-button }