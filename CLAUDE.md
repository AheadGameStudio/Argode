# Ren' Gd - Godotç”¨ADVã‚²ãƒ¼ãƒ ã‚¨ãƒ³ã‚¸ãƒ³ã‚¢ãƒ‰ã‚ªãƒ³

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦

Ren'Pyé¢¨ã®ã‚¢ãƒ‰ãƒ™ãƒ³ãƒãƒ£ãƒ¼ã‚²ãƒ¼ãƒ ã‚¨ãƒ³ã‚¸ãƒ³ã‚’Godot Engine 4.xç”¨ã‚¢ãƒ‰ã‚ªãƒ³ã¨ã—ã¦å®Ÿè£…ã€‚ã‚«ã‚¹ã‚¿ãƒ `.rgd`ã‚¹ã‚¯ãƒªãƒ—ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½¿ç”¨ã—ã¦ã€ãƒãƒ™ãƒ«ã‚²ãƒ¼ãƒ åˆ¶ä½œã‚’æ”¯æ´ã™ã‚‹ã€‚

## å®Ÿè£…æ¸ˆã¿æ©Ÿèƒ½

### ã‚³ã‚¢ã‚·ã‚¹ãƒ†ãƒ 
- **AdvScriptPlayer**: `.rgd`ãƒ•ã‚¡ã‚¤ãƒ«ã®è§£æãƒ»å®Ÿè¡Œã‚¨ãƒ³ã‚¸ãƒ³
- **LabelRegistry**: è¤‡æ•°ãƒ•ã‚¡ã‚¤ãƒ«é–“ã§ã®ãƒ©ãƒ™ãƒ«ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ï¼ˆRen'Pyé¢¨ï¼‰
- **BaseAdvGameUI**: ç¶™æ‰¿å¯èƒ½ãªåŸºæœ¬UIã‚¯ãƒ©ã‚¹

### ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã‚·ã‚¹ãƒ†ãƒ 
- **CharacterManager**: ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼è¡¨ç¤ºãƒ»ç®¡ç†
- **UIManager**: UIåˆ¶å¾¡ãƒ»ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º  
- **VariableManager**: å¤‰æ•°ç®¡ç†ãƒ»ä¿å­˜
- **TransitionPlayer**: ãƒˆãƒ©ãƒ³ã‚¸ã‚·ãƒ§ãƒ³åŠ¹æœã‚·ã‚¹ãƒ†ãƒ 

### UIæ©Ÿèƒ½
- **TypewriterText**: ã‚¿ã‚¤ãƒ—ãƒ©ã‚¤ã‚¿ãƒ¼åŠ¹æœï¼ˆBBCodeå¯¾å¿œï¼‰
- **é¸æŠè‚¢ãƒ¡ãƒ‹ãƒ¥ãƒ¼**: å‹•çš„é¸æŠè‚¢ç”Ÿæˆ
- **ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒœãƒƒã‚¯ã‚¹**: ãƒªãƒƒãƒãƒ†ã‚­ã‚¹ãƒˆå¯¾å¿œ

## ã‚¹ã‚¯ãƒªãƒ—ãƒˆä»•æ§˜ï¼ˆ.rgdãƒ•ã‚¡ã‚¤ãƒ«ï¼‰

### åŸºæœ¬ã‚³ãƒãƒ³ãƒ‰
```rgd
# ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼å®šç¾©
define y = Character("res://characters/yuko.tres")

# ãƒ©ãƒ™ãƒ«å®šç¾©
label scene_test_start:

# ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º
"ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ†ã‚­ã‚¹ãƒˆ"
y "ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ã‚»ãƒªãƒ•"

# èƒŒæ™¯å¤‰æ›´ï¼ˆãƒˆãƒ©ãƒ³ã‚¸ã‚·ãƒ§ãƒ³å¯¾å¿œï¼‰
scene classroom with fade
scene park with dissolve

# ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼è¡¨ç¤º
show y normal at center
show s happy at left with fade

# ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼éè¡¨ç¤º
hide y with fade

# é¸æŠè‚¢
menu:
    "é¸æŠè‚¢1":
        jump label1
    "é¸æŠè‚¢2":
        jump label2

# ãƒ©ãƒ™ãƒ«ã‚¸ãƒ£ãƒ³ãƒ—
jump other_label

# ãƒ•ã‚¡ã‚¤ãƒ«é–“ã‚¸ãƒ£ãƒ³ãƒ—ï¼ˆLabelRegistryä½¿ç”¨ï¼‰
jump chapter1_start  # åˆ¥ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ©ãƒ™ãƒ«
```

### ãƒˆãƒ©ãƒ³ã‚¸ã‚·ãƒ§ãƒ³ç¨®é¡
- `none`: ãƒˆãƒ©ãƒ³ã‚¸ã‚·ãƒ§ãƒ³ãªã—
- `fade`: ãƒ•ã‚§ãƒ¼ãƒ‰ã‚¤ãƒ³/ã‚¢ã‚¦ãƒˆ
- `dissolve`: ãƒ‡ã‚£ã‚¾ãƒ«ãƒ–ï¼ˆç¾åœ¨ã¯fadeã¨åŒã˜ï¼‰
- `slide_left/right/up/down`: ã‚¹ãƒ©ã‚¤ãƒ‰åŠ¹æœ

## ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ

### ã‚¢ãƒ‰ã‚ªãƒ³ãƒ•ã‚¡ã‚¤ãƒ«
```
addons/adv_engine/
â”œâ”€â”€ plugin.gd                    # ãƒ—ãƒ©ã‚°ã‚¤ãƒ³è¨­å®š
â”œâ”€â”€ AdvScriptPlayer.gd           # ãƒ¡ã‚¤ãƒ³ã‚¹ã‚¯ãƒªãƒ—ãƒˆãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼
â”œâ”€â”€ LabelRegistry.gd             # ãƒ©ãƒ™ãƒ«ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ 
â”œâ”€â”€ ui/
â”‚   â””â”€â”€ BaseAdvGameUI.gd         # åŸºæœ¬UIã‚¯ãƒ©ã‚¹
â””â”€â”€ managers/
    â”œâ”€â”€ CharacterManager.gd      # ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ç®¡ç†
    â”œâ”€â”€ UIManager.gd             # UIç®¡ç†
    â”œâ”€â”€ VariableManager.gd       # å¤‰æ•°ç®¡ç†
    â””â”€â”€ TransitionPlayer.gd      # ãƒˆãƒ©ãƒ³ã‚¸ã‚·ãƒ§ãƒ³å‡¦ç†
```

### ã‚·ãƒŠãƒªã‚ªãƒ•ã‚¡ã‚¤ãƒ«
```
scenarios/
â”œâ”€â”€ scene_test.rgd              # ãƒ¡ã‚¤ãƒ³ãƒ†ã‚¹ãƒˆï¼ˆscene_test_startï¼‰
â”œâ”€â”€ chapter1.rgd                # ç¬¬1ç« ï¼ˆchapter1_startï¼‰
â”œâ”€â”€ chapter2.rgd                # ç¬¬2ç« ï¼ˆchapter2_startï¼‰
â””â”€â”€ *.rgd                       # ãã®ä»–ã‚·ãƒŠãƒªã‚ª
```

## é‡è¦ãªå®Ÿè£…æ³¨æ„ç‚¹

### ãƒ©ãƒ™ãƒ«ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ 
- **é‡è¤‡ãƒ©ãƒ™ãƒ«ç¦æ­¢**: å…¨ãƒ•ã‚¡ã‚¤ãƒ«é–“ã§ãƒ©ãƒ™ãƒ«åã¯ä¸€æ„ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚‹
- **ãƒ¦ãƒ‹ãƒ¼ã‚¯ãƒ©ãƒ™ãƒ«å‘½å**: `ãƒ•ã‚¡ã‚¤ãƒ«å_ãƒ©ãƒ™ãƒ«å` å½¢å¼ã‚’æ¨å¥¨
  - `scene_test_start`ï¼ˆscene_test.rgdï¼‰
  - `chapter1_start`ï¼ˆchapter1.rgdï¼‰
- **ã‚¨ãƒ©ãƒ¼è¡¨ç¤º**: é‡è¤‡ãƒ©ãƒ™ãƒ«ã¯èµ·å‹•æ™‚ã«ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤º
- **è»½é‡ãƒ¡ãƒ¢ãƒªç®¡ç†**: ãƒ©ãƒ™ãƒ«ä½ç½®æƒ…å ±ã®ã¿ãƒ¡ãƒ¢ãƒªä¿æŒã€ã‚¹ã‚¯ãƒªãƒ—ãƒˆå†…å®¹ã¯å¿…è¦æ™‚èª­ã¿è¾¼ã¿

### autoloadè¨­å®š
project.godotã«ä»¥ä¸‹ãŒè‡ªå‹•ç™»éŒ²ã•ã‚Œã‚‹ï¼š
```
[autoload]
AdvScriptPlayer="*res://addons/adv_engine/AdvScriptPlayer.gd"
VariableManager="*res://addons/adv_engine/managers/VariableManager.gd"
CharacterManager="*res://addons/adv_engine/managers/CharacterManager.gd"
UIManager="*res://addons/adv_engine/managers/UIManager.gd"
TransitionPlayer="*res://addons/adv_engine/managers/TransitionPlayer.gd"
LabelRegistry="*res://addons/adv_engine/LabelRegistry.gd"
```

### UIçµ±åˆ
BaseAdvGameUIã‚’ç¶™æ‰¿ã—ã¦ä½¿ç”¨ï¼š
```gdscript
extends BaseAdvGameUI

# è‡ªå‹•è¨­å®šå¯èƒ½
@export var auto_start_script: bool = true
@export var default_script_path: String = "res://scenarios/scene_test.rgd"
@export var start_label: String = "scene_test_start"
```

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚ˆãã‚ã‚‹å•é¡Œ

1. **ãƒˆãƒ©ãƒ³ã‚¸ã‚·ãƒ§ãƒ³ãŒå‹•ä½œã—ãªã„**
   - ã‚·ãƒŠãƒªã‚ªãƒ•ã‚¡ã‚¤ãƒ«ã§ `with fade` ãŒè¨˜è¿°ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
   - TransitionPlayerãŒautoloadã«ç™»éŒ²ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
   - ãƒ‡ãƒãƒƒã‚°ãƒ­ã‚°ã§ `transition: none` ã¨è¡¨ç¤ºã•ã‚Œã‚‹å ´åˆã¯æ§‹æ–‡ã‚¨ãƒ©ãƒ¼

2. **ãƒ©ãƒ™ãƒ«ãŒè¦‹ã¤ã‹ã‚‰ãªã„**
   - ãƒ©ãƒ™ãƒ«åã®ã‚¿ã‚¤ãƒã‚’ç¢ºèª
   - ãƒ•ã‚¡ã‚¤ãƒ«é–“ã‚¸ãƒ£ãƒ³ãƒ—ã®å ´åˆã€LabelRegistryãŒæ­£å¸¸ã«åˆæœŸåŒ–ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
   - ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§ã€ŒğŸ” Label 'xxx' not foundã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ç¢ºèª

3. **é‡è¤‡ãƒ©ãƒ™ãƒ«ã‚¨ãƒ©ãƒ¼**
   - èµ·å‹•æ™‚ã®ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã§é‡è¤‡ç®‡æ‰€ã‚’ç‰¹å®š
   - å„ãƒ•ã‚¡ã‚¤ãƒ«ã§ãƒ¦ãƒ‹ãƒ¼ã‚¯ãªãƒ©ãƒ™ãƒ«åã‚’ä½¿ç”¨
   - `start` â†’ `scene_test_start` ã®ã‚ˆã†ã«å¤‰æ›´

### ãƒ‡ãƒãƒƒã‚°æƒ…å ±
ä»¥ä¸‹ã®ãƒ­ã‚°ãŒæ­£å¸¸æ™‚ã«å‡ºåŠ›ã•ã‚Œã‚‹ï¼š
```
ğŸ¬ TransitionPlayer found successfully
ğŸ” Scene regex matched line: 'scene classroom with fade'
ğŸ¬ Parsed scene_name: 'classroom', transition: 'fade'
ğŸ¬ Executing transition: fade
âœ… Transition completed: fade
```

## ä»Šå¾Œã®æ‹¡å¼µäºˆå®š
- ã‚«ã‚¹ã‚¿ãƒ ã‚·ã‚§ãƒ¼ãƒ€ãƒ¼ã‚’ä½¿ã£ãŸãƒˆãƒ©ãƒ³ã‚¸ã‚·ãƒ§ãƒ³åŠ¹æœ
- ã‚»ãƒ¼ãƒ–ãƒ»ãƒ­ãƒ¼ãƒ‰æ©Ÿèƒ½
- éŸ³å£°ãƒ»BGMåˆ¶å¾¡ã‚³ãƒãƒ³ãƒ‰
- æ¡ä»¶åˆ†å²ï¼ˆifæ–‡ï¼‰ã‚µãƒãƒ¼ãƒˆ
- å¤‰æ•°æ“ä½œã‚³ãƒãƒ³ãƒ‰ã®æ‹¡å¼µ

## é–‹ç™ºå±¥æ­´
- åŸºæœ¬ã‚¨ãƒ³ã‚¸ãƒ³å®Ÿè£…å®Œäº†
- ã‚¿ã‚¤ãƒ—ãƒ©ã‚¤ã‚¿ãƒ¼åŠ¹æœå®Ÿè£…
- è¤‡æ•°ãƒ•ã‚¡ã‚¤ãƒ«å¯¾å¿œãƒ©ãƒ™ãƒ«ã‚·ã‚¹ãƒ†ãƒ å®Ÿè£…
- ãƒˆãƒ©ãƒ³ã‚¸ã‚·ãƒ§ãƒ³ã‚·ã‚¹ãƒ†ãƒ å®Ÿè£…ãƒ»ãƒ‡ãƒãƒƒã‚°å®Œäº†