# TODO List - Ren' Gd ADVアドオン

このファイルは、DESIGN_DOCUMENT.mdに基づいて作成されたタスクリストです。

## 📋 コア機能の実装

### 🎯 スクリプト実行エンジン
- [x] `AdvScriptPlayer.gd` の実装
  - [x] 正規表現パターンの定義
  - [x] `load_script()` メソッド実装
  - [x] `_preparse_labels()` メソッド実装
  - [x] `_parse_and_execute()` メソッド実装
  - [x] コマンド解析・実行ロジック（基本部分）
  - [x] コールスタック管理（基本部分）

### 👤 キャラクター管理システム
- [x] `CharacterData.gd` リソースクラス実装
  - [x] `display_name` プロパティ
  - [x] `name_color` プロパティ
  - [x] 画像パス管理（プレースホルダー対応）
- [x] `CharacterManager.gd` 実装
  - [x] `show_character()` メソッド
  - [x] キャラクター画像の表示・更新
  - [x] スプライト管理
  - [x] トランジション連携

### 🎨 UI管理システム
- [x] `UIManager.gd` 実装（基本部分）
  - [x] `show_message()` メソッド
  - [x] `show_choices()` メソッド（完全版）
  - [x] テキストボックス表示
  - [x] 選択肢UI生成・制御
  - [x] ボタンイベント処理

### 🎬 演出・トランジション管理
- [x] `TransitionPlayer.gd` 実装
  - [x] `play()` メソッド
  - [x] fade, dissolve などの基本トランジション実装
  - [x] Tweenアニメーション制御
  - [x] シグナル管理

### 🧮 変数管理システム
- [x] `VariableManager.gd` 実装
  - [x] `set_variable()` メソッド
  - [x] `evaluate_condition()` メソッド
  - [x] `set_character_def()` メソッド
  - [x] Expression評価機能
  - [x] 変数展開機能（`expand_variables()`）

## 📝 スクリプトコマンド対応

### 基本コマンド
- [x] `say` コマンド（セリフ表示）
- [x] `set` コマンド（変数操作）
- [x] `if/else` コマンド（条件分岐）
- [x] `menu` コマンド（選択肢）
- [x] `jump` コマンド（ラベルジャンプ）
- [x] `call/return` コマンド（サブルーチン）

### 演出コマンド
- [x] `scene` コマンド（背景表示）
- [x] `show` コマンド（キャラクター表示）
- [x] `hide` コマンド（キャラクター非表示）
- [x] `with` 句（トランジション指定）

### 高度な機能
- [x] `define` コマンド（キャラクター定義）
- [x] `label` の前処理・解析
- [x] 変数展開（`{variable_name}`）
- [x] コメント行の処理

## 🔧 プロジェクト構成

### ディレクトリ構造
- [x] `addons/adv_engine/` フォルダ作成
- [x] `managers/` サブフォルダ作成
- [x] `characters/` フォルダ作成
- [x] `scenarios/` フォルダ作成
- [x] `images/` フォルダ作成

### プラグイン設定
- [x] `plugin.cfg` 作成
- [x] プラグインクラス実装
- [x] オートロード設定（推奨設定の文書化）

## 🧪 テスト・サンプル

### サンプルファイル
- [x] `sample.rgd` シナリオファイル作成
- [x] `yuko.tres` キャラクターリソース作成
- [x] `saitos.tres` キャラクターリソース作成
- [x] `transition_test.rgd` トランジションテスト用シナリオ作成
- [ ] テスト用画像素材準備

### デモシーン
- [x] `MainScene.tscn` 作成（既存）
- [x] `MainScene.gd` スクリプト実装
- [x] 入力処理の実装（基本）

### サンプルUI
- [x] `design/gui/` フォルダ作成
- [x] サンプルUIシーン作成 (`AdvGameUI.tscn`)
- [x] テキストボックスUI（RichTextLabel対応）
- [x] 選択肢ボタンUI（動的生成）
- [x] UIManagerとの連携実装
- [x] 使用方法サンプルシーン (`usage_sample.tscn`)
- [x] ドキュメント作成 (`README.md`)
- [x] タイプライター風テキスト表示機能 (`TypewriterText.gd`)

## 📚 ドキュメント・マニュアル

### 開発者向け
- [ ] API リファレンス
- [ ] アーキテクチャ解説
- [ ] 拡張・カスタマイズガイド

### 利用者向け
- [ ] クイックスタートガイド
- [ ] スクリプトコマンドリファレンス
- [ ] チュートリアル

## 🚀 Ren'Py機能との比較・不足機能

### 📋 セーブ・ロードシステム
- [ ] ゲーム状態のセーブ機能（変数、位置、フラグ等）
- [ ] ロード機能（セーブデータからの復帰）
- [ ] セーブスロット管理
- [ ] オートセーブ機能
- [ ] クイックセーブ・ロード（F5/F9等）

### 🎵 オーディオシステム
- [ ] BGM再生・管理（`play music`コマンド）
- [ ] SE再生（`play sound`コマンド）
- [ ] 音声ファイル（`play voice`コマンド）
- [ ] オーディオチャンネル管理
- [ ] フェードイン・アウト対応
- [ ] 音量設定・ミュート機能

### 📜 履歴・ログシステム  
- [ ] バックログ機能（既読テキスト履歴）
- [ ] 履歴画面UI
- [ ] 履歴から任意位置に戻る機能
- [ ] テキスト表示履歴の保存

### ⏩ 自動進行・スキップ機能
- [ ] オート機能（自動メッセージ進行）
- [ ] スキップ機能（高速進行・既読スキップ）
- [ ] 進行速度設定
- [ ] スキップモード切り替えUI

### 🔧 設定・環境システム
- [ ] 環境設定画面（音量、速度等）
- [ ] ゲーム設定の永続化
- [ ] フルスクリーン切り替え
- [ ] ウィンドウサイズ管理

### 🏷️ 高度なラベル・制御機能
- [ ] `call`文の完全実装（戻り値対応）
- [ ] `return`文の引数対応
- [ ] ネストした`call`スタック管理
- [ ] `jump_out_of_context`相当機能

### 🎨 高度な演出機能
- [ ] `at transform`（アニメーション変形）
- [ ] `show expression`（動的画像指定）
- [ ] レイヤー管理（master, overlay等）
- [ ] 画面効果（`with Fade()`等カスタムトランジション）

### 🐍 Python統合機能
- [ ] `$`文（Python式の実行）
- [ ] `python:`ブロック（複数行Python）
- [ ] `default`文（変数初期値設定）
- [ ] `init python:`（初期化時Python実行）

### 🌐 国際化・多言語対応
- [ ] 翻訳システム（`__()`関数）
- [ ] 言語切り替え機能
- [ ] フォント管理（言語別フォント）
- [ ] テキスト方向対応（LTR/RTL）

### 🛠️ デバッグ・開発支援
- [ ] 開発者コンソール（Shift+O相当）
- [ ] 変数ウォッチ機能
- [ ] リアルタイムスクリプト更新
- [ ] Lintツール（スクリプト検証）
- [ ] エラー箇所の詳細表示

### 🎮 入力・操作拡張
- [ ] キーボードショートカット設定
- [ ] マウスホイール対応
- [ ] ジョイパッド対応
- [ ] タッチデバイス対応

### 📊 統計・解析機能
- [ ] プレイ時間記録
- [ ] 選択肢統計
- [ ] 達成率管理
- [ ] エンディング到達記録

## 🚀 追加検討事項

### 機能拡張（既存項目）
- [ ] セーブ・ロード機能 → 上記詳細項目に統合
- [ ] バックログ機能 → 上記詳細項目に統合  
- [ ] スキップ・オート機能 → 上記詳細項目に統合
- [ ] BGM・SE管理 → 上記詳細項目に統合
- [ ] 多言語対応 → 上記詳細項目に統合

### UI・UX拡張
- [x] タイプライター風テキスト表示
- [ ] タイプライター効果音システム
- [ ] テキスト表示速度設定UI
- [ ] メッセージウィンドウアニメーション

### 最適化・改良
- [ ] パフォーマンス最適化
- [ ] エラーハンドリング強化
- [ ] デバッグ機能 → 上記詳細項目に統合
- [ ] エディタ統合機能